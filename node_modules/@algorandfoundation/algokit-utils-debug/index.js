'use strict';

var algokitUtils = require('@algorandfoundation/algokit-utils');
var writeAVMDebugTrace = require('./debugging/writeAVMDebugTrace.js');
var writeTealDebugSourceMaps = require('./debugging/writeTealDebugSourceMaps.js');

/* eslint-disable @typescript-eslint/no-explicit-any */
/**
 * Registers event handlers for debugging events in Algorand development.
 *
 * This function sets up handlers for the following events:
 * - 'TxnGroupSimulated': Calls the `writeAVMDebugTrace` function to generate and persist an AVM debug trace.
 * - 'AppCompiled': Calls the `writeTealDebugSourceMaps` function to generate and persist TEAL source maps.
 *
 * These handlers help in debugging Algorand smart contracts by providing detailed traces and source maps.
 *
 * @returns {void}
 */
const registerDebugEventHandlers = () => {
    algokitUtils.Config.events.on(algokitUtils.EventType.TxnGroupSimulated, async (eventData) => {
        await writeAVMDebugTrace.writeAVMDebugTrace(eventData, algokitUtils.Config.traceBufferSizeMb || 256);
    });
    algokitUtils.Config.events.on(algokitUtils.EventType.AppCompiled, async (data) => {
        await writeTealDebugSourceMaps.writeTealDebugSourceMaps(data);
    });
};

exports.writeAVMDebugTrace = writeAVMDebugTrace.writeAVMDebugTrace;
exports.writeTealDebugSourceMaps = writeTealDebugSourceMaps.writeTealDebugSourceMaps;
exports.registerDebugEventHandlers = registerDebugEventHandlers;
//# sourceMappingURL=index.js.map
