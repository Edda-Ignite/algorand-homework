{"version":3,"file":"check-node-version-DQviFT_1.js","sources":["../src/cli/app-version.ts","../src/cli/check-node-version.ts"],"sourcesContent":["import fs from 'fs'\nimport { fileURLToPath } from 'node:url'\nimport upath from 'upath'\nimport { Constants } from '../constants'\n\nexport function appVersion(name: string = 'puya-ts') {\n  let dirName = upath.dirname(fileURLToPath(import.meta.url))\n\n  while (true) {\n    const packageJsonPath = upath.join(dirName, 'package.json')\n    if (fs.existsSync(packageJsonPath)) {\n      const version = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8')).version\n      return [\n        `${name} ${version}`,\n        '',\n        'Targets:',\n        `puya ${Constants.targetedPuyaVersion}`,\n        `AVM ${Constants.supportedAvmVersions.join(', ')}`,\n      ].join('\\r\\n')\n    }\n    if (dirName === upath.dirname(dirName)) break\n    dirName = upath.dirname(dirName)\n  }\n  return `Cannot determine puya-ts version`\n}\n","import chalk from 'chalk'\nimport { Constants } from '../constants'\nimport { parseSemVer } from '../puya/semver'\n\nfunction writeError(text: string) {\n  // eslint-disable-next-line no-console\n  console.error(chalk.red(text))\n}\n\nexport function checkNodeVersion() {\n  const min = parseSemVer(Constants.minNodeVersion)\n  const actual = parseSemVer(process.versions.node)\n\n  if (\n    actual.major < min.major ||\n    (actual.major === min.major && actual.minor < min.minor) ||\n    (actual.major === min.major && actual.minor === min.minor && actual.rev < min.rev)\n  ) {\n    writeError(\n      `Installed node version ${process.versions.node} is older than the minimum required version ${Constants.minNodeVersion}. You may experience compatability issues.`,\n    )\n  }\n}\n"],"names":["fs"],"mappings":";;;;;;AAKgB,SAAA,UAAU,CAAC,IAAA,GAAe,SAAS,EAAA;AACjD,IAAA,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAE3D,OAAO,IAAI,EAAE;QACX,MAAM,eAAe,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;AAC3D,QAAA,IAAIA,WAAE,CAAC,UAAU,CAAC,eAAe,CAAC,EAAE;AAClC,YAAA,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAACA,WAAE,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC,OAAO;YAC5E,OAAO;gBACL,CAAG,EAAA,IAAI,CAAI,CAAA,EAAA,OAAO,CAAE,CAAA;gBACpB,EAAE;gBACF,UAAU;gBACV,CAAQ,KAAA,EAAA,SAAS,CAAC,mBAAmB,CAAE,CAAA;gBACvC,CAAO,IAAA,EAAA,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAE,CAAA;AACnD,aAAA,CAAC,IAAI,CAAC,MAAM,CAAC;;AAEhB,QAAA,IAAI,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;YAAE;AACxC,QAAA,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;;AAElC,IAAA,OAAO,kCAAkC;AAC3C;;ACpBA,SAAS,UAAU,CAAC,IAAY,EAAA;;IAE9B,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAChC;SAEgB,gBAAgB,GAAA;IAC9B,MAAM,GAAG,GAAG,WAAW,CAAC,SAAS,CAAC,cAAc,CAAC;IACjD,MAAM,MAAM,GAAG,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;AAEjD,IAAA,IACE,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK;AACxB,SAAC,MAAM,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;SACvD,MAAM,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,IAAI,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,EAClF;AACA,QAAA,UAAU,CACR,CAAA,uBAAA,EAA0B,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAA,4CAAA,EAA+C,SAAS,CAAC,cAAc,CAAA,0CAAA,CAA4C,CACnK;;AAEL;;;;"}